$(document).ready(function(){objectFitImages();initSidebarHeight();var isMobile=window.matchMedia("only screen and (max-width: 768px)");if(!isLoggedIn()&&getModalReferer()){clearUnwantedModalErrors(getModalReferer());cleanThenShowModal(getModalReferer());}
$('.scroll-vertical').each(function(){var theme=$(this).data('theme');$(this).mCustomScrollbar({theme:theme,axis:'y',scrollInertia:500,keyboard:true,autoExpandScrollbar:true});});$('.toggle-menu').on('click',function(){$(this).next().stop().slideToggle();});$('.toggle-sidebar').on('click',function(){$('body').toggleClass('close-menu');});$('.show-control').on('click',function(){var control=$(this).data('activates');showControl('#'+control);});$('.hide-control').on('click',function(){hide_control();});$('.ease-slider').each(function(){var max=max_timeline();$(this).slider({range:true,min:1,max:max,values:[1,max],slide:function(event,ui){$('.ease-in-input input').val(ui.values[0]);$('.ease-out-input input').val(ui.values[1]);}});});$('.range-slider').each(function(){var parent=$(this).closest('.has-range');var min=$(this).data('min');var max=$(this).data('max');var step=$(this).data('step');var value=$(this).data('value');var disable=$(this).data('disable');$(this).slider({orientation:'horizontal',range:'min',step:step,min:min,max:max,animate:true,disabled:disable,slide:function(event,ui){$(parent).find('.range-input').val(ui.value).trigger('change');$(ui.handle).find('.tooltip').text(ui.value).css({'opacity':'1','background-color':'#03c'});},create:function(event,ui){var tooltip=$('<span class="tooltip" />');$(event.target).find('.ui-slider-handle').append(tooltip);$(this).slider('value',$(parent).find('.range-input').val());},stop:function(event,ui){$(ui.handle).find('.tooltip').css({'opacity':'0','background-color':'#666'})}});});$('.range-input').each(function(){var slider=$(this).closest('.has-range').find('.range-slider');$(this).on('mousedown mouseup blur change keyup keydown click keypress input',function(){if($(this).val().length===0){$(slider).slider('value',this.value);}else{$(slider).slider('value',this.value);}});});$('.apply-filter').on('click',function(){$(this).addClass('applied-filter');});$('.close-overlay').on('click',function(e){e.stopPropagation();$(this).closest('.apply-filter').removeClass('applied-filter');});$('.js-collapse-sidebar').on('click',function(e){e.preventDefault();var $this=$(this),$sidebar=$this.siblings('.tabs-container');$createNavigation=$this.siblings('.create-navigation'),$createSidebar=$this.parents('.create-sidebar');if($this.hasClass('is-collapsed')){$this.removeClass('is-collapsed');$sidebar.removeClass('is-collapsed');}else{$this.addClass('is-collapsed');$sidebar.addClass('is-collapsed');$createSidebar.removeClass('has-selected');}});let $userModal=$('.user-modal'),$registerForm=$('#form-register'),$loginForm=$('#form-login'),$forgotPwForm=$('#form-forgot-pw');$('.user-modal .form-control').each(function(){let $this=$(this),$label=$this.siblings('.control-label');$this.on('focus',function(){$label.addClass('is-filled');}).on('blur',function(){if($this.val()==''){$label.removeClass('is-filled');}else{$label.addClass('is-filled');}});});$('.js-toggle-pw-visible').on('click',function(e){e.preventDefault();var $this=$(this);var show=$this.siblings('.form-control[type="text"]'),pass=$this.siblings('.form-control[type="password"]'),showing=show.is(":visible"),from=showing?show:pass,to=showing?pass:show;from.hide();to.show().focus();$(this).text($(this).text()=='Show'?'Hide':'Show');});$('input','.form-login-password, .form-reg-password, .form-reg-password-confirm, .form-reset-password, .form-reset-password-confirm, .form-acc-old-password, .form-acc-new-password, .form-acc-new-password-confirm').on('click',function(){if(!$(this).is(':visible')){$(this).show().trigger('click').focus();$(this).siblings('input').hide();$(this).siblings('.btn-toggle-pw-visible').text($(this).siblings('.btn-toggle-pw-visible').text()=='Show'?'Hide':'Show');}}).on('keyup',function(e){var $thisInput=$(this),$otherInput=$thisInput.siblings('input');$otherInput.val($thisInput.val());});$('.js-forgot-pw').on('click',function(e){e.preventDefault();showForgotPwModal();});$('.js-email_social').on('click',function(event){event.preventDefault();var u_social=$('#emailLogin').val(),p_social='';$('#username-social').val(u_social.substr(0,u_social.indexOf('@')));$('#social_email_add').val(u_social);$('.social-control-label').addClass('is-filled');$('#form-login').hide();$('#link-login').show();});let $loginWithPassword=$('.form-login-password, .form-login-remember, .js-login-link, .js-submit-login'),$loginWithLink=$('.js-login-password, .js-send-link, .login-link-instruction');$('.js-login-link').on('click',function(e){e.preventDefault();$loginWithPassword.hide();$loginWithLink.show();$('#loginLink').val("on");$('#loginType').val("link");$('#btnSendlink','#btnSubmit').toggle();$('#passwordLogin').prop('required',!jQuery('#passwordLogin').prop('required'));$('#passwordLoginShow').prop('required',!jQuery('#passwordLoginShow').prop('required'));});$('.js-login-password').on('click',function(e){e.preventDefault();$loginWithPassword.show();$loginWithLink.hide();$('#loginLink').val("off");$('#loginType').val("password");$('#btnSendlink','#btnSubmit').toggle();$('#passwordLogin').prop('required',!jQuery('#passwordLogin').prop('required'));$('#passwordLoginShow').prop('required',!jQuery('#passwordLoginShow').prop('required'));});$('.js-close-user-modal, .user-modal__overlay').on('click',function(e){e.preventDefault();if(typeof intervalVTimer!='undefined'){clearVTimer();}
$('#download-modal').removeClass('only-preview');if($('#loading-animation-modal').hasClass('is-show')){if($('#download-video-wrapper').is('video')){$('#download-video-wrapper').get(0).pause();$('#download-video-wrapper').get(0).currentTime=0;}
if($('.js-loading-rendering').is('video')){$('.js-loading-rendering').get(0).pause();$('.js-loading-rendering').get(0).currentTime=0;}}
if(typeof openMaxProjectModal=='function'){openMaxProjectModal();}
if($('#thankyou-modal').hasClass('is-show')){location.reload();return false;}
if($('#upgrade-plan-modal').hasClass('is-show')&&typeof $('#upgrade-plan-modal').data('ref')!=='undefined'){$($('#upgrade-plan-modal').data('ref')).trigger('click');$('#upgrade-plan-modal').removeData('ref');}
if($('#premium-welcome-modal').hasClass('is-show')){$('#premium-welcome-modal').removeClass('is-show');}
if($('#auth-modal-wrapper').hasClass('is-show')&&!$('.btn-close-user-modal:visible','#auth-modal-wrapper').length){$('#auth-modal-wrapper').addClass('is-shaken');setTimeout(function(){$('#auth-modal-wrapper').removeClass('is-shaken');},1000);return false;}
if($('#simple-modal').hasClass('is-show')&&!$('#premium-welcome-modal').hasClass('is-show')){return false;}else if($('#simple-modal').hasClass('is-show')&&$('#premium-welcome-modal').hasClass('is-show')){setTimeout(function(){$('#main-header').addClass('move-up');},50)}
if($('#premium-cancel-modal').hasClass('is-show')){$('body').removeClass('is-overlapped');}
if($('#fb-ads-modal').hasClass('is-show')&&$('.user-modal.is-show').length==1){return false;}
$('#video_container').empty();$registerForm.removeClass('is-show');$loginForm.removeClass('is-show');let $userModal=$(this).closest('.user-modal');if($('#upgrade-plan-modal.choose-format-modal').length){$userModal.removeClass('is-show');$('#choose-size-modal').addClass('is-show');return false;}
if(!$('#rendering-video-wrapper').is(':visible')&&!$('.page-details.is-blocked').length&&!$('#choose-size-modal.is-show').length){$('#main-header').removeClass('move-up');$userModal.removeClass('is-show');}else{if($('#upgrade-plan-modal').hasClass('is-show')){$('#upgrade-plan-modal').removeClass('is-show')}
$userModal.addClass('is-shaken');setTimeout(function(){$userModal.removeClass('is-shaken');},1000);}});$('form','.user-modal').on('submit',function(e){var formIsValid=true;$('input,textarea,select').filter('[required]:visible').each(function(){if($(this).val()==""){formIsValid=false;}});if(formIsValid){var $submitBtn=$('*[type="submit"]:visible',$(this));$submitBtn.hide();if(!$('.preloader-icon.tmp',$(this)).length){$submitBtn.after('<div class="preloader-icon tmp" style="display: inline-block; width: 25px; height: 25px;"></div>');}}});if($('.home-slide').length){$('.home-slide').slick({slidesToShow:1,slidesToScroll:1,dots:false,infinite:true,autoplay:true,prevArrow:'<button type="button" class="slick-arrow slick-prev"><span class="vh">Previous</span><i class="icon icon-back"></i></button>',nextArrow:'<button type="button" class="slick-arrow slick-next"><span class="vh">Next</span><i class="icon icon-next"></i></button>',speed:500,autoplaySpeed:5000,fade:true}).on('afterChange',function(event,slick,currentSlide,nextSlide){$(`.home-slide__item:eq(${currentSlide}) video`)[0].play();});if($(`.home-slide__item:eq(0) video`).length){$(`.home-slide__item:eq(0) video`)[0].play();}}
if($('.banner').length){window._wq=window._wq||[];_wq.push({id:"_all",onReady:function(video){let id=video._containerId,$container=$(`#${id}`).closest('.banner__video');if($container.length){video.bind('play',function(){});video.bind('end',function(){$container.fadeOut();let $nextContainer;if($container.next('.banner__video').length){$nextContainer=$container.next('.banner__video');}else{$nextContainer=$('.banner__video').first();}
let $video=$nextContainer.find('video');$nextContainer.fadeIn(400,function(){if(!isMobile.matches&&$video[0]){var playPromise=$video[0].play();if(playPromise!==undefined){playPromise.then(function(){}).catch(function(error){console.log('error in playing',error);$video.trigger('click');});}}})});}}});}
if($('.banner__carousel').length&&isMobile.matches){let $carousel=$('.banner__carousel');$carousel.slick({slidesToShow:1,slidesToScroll:1,dots:false,infinite:true,autoplay:true,arrows:false,fade:true,pauseOnHover:false,pauseOnFocus:false,autoplaySpeed:5000,})}
if($('.plans').length){let $parent=$('.plans__list').not('.no-slick');$parent.slick({slidesToShow:1,slidesToScroll:1,dots:true,infinite:false,autoplay:false,arrows:false,speed:500,centerMode:true,centerPadding:'60px',mobileFirst:true,responsive:[{breakpoint:767,settings:{slidesToShow:3,centerPadding:'10px'}}]});setTimeout(function(){setNewHeight();},200)
function setNewHeight(){$('.plans__item--free').find('.item__point').each(function(index){let $this=$(this),height=$this.outerHeight(),idx=index+1;$(`.item__point:nth-child(${idx})`).each(function(){$(this).css({height:'auto'});if(height<$(this).outerHeight()){height=$(this).outerHeight();}});$(`.item__point:nth-child(${idx})`).css({height:height});});}
if($(window).width()<=767){$parent.slick('slickGoTo',0);}
$(window).on('resize',debounce(function(){setNewHeight();if($(window).width()<=767){$parent.slick('slickGoTo',0);}},200))}
$('.js-upgrade-modal').on('click',function(event){$('#upgrade-plan-modal').addClass('is-show');});$('.js-mute').on('click',function(){let $this=$(this),video=$this.next('video')[0];if($this.hasClass('is-active')){$this.removeClass('is-active');video.muted=true;}else{$this.addClass('is-active');video.muted=false;}})
if($('.testimonials').length){$('.textimonials__list').slick({slidesToShow:1,slidesToScroll:1,dots:false,infinite:true,prevArrow:'<button type="button" class="slick-arrow slick-prev"><span class="vh">Previous</span><i class="icon icon-chevron-thin-left"></i></button>',nextArrow:'<button type="button" class="slick-arrow slick-next"><span class="vh">Next</span><i class="icon icon-chevron-thin-right"></i></button>',speed:500,});}
if($('.template-list').length){$('.template-list__list').slick({slidesToShow:4,slidesToScroll:1,dots:false,infinite:true,prevArrow:'<button type="button" class="slick-arrow slick-prev"><span class="vh">Previous</span><i class="icon icon-chevron-thin-left"></i></button>',nextArrow:'<button type="button" class="slick-arrow slick-next"><span class="vh">Next</span><i class="icon icon-chevron-thin-right"></i></button>',speed:500,variableWidth:true});}
if($(window).width()<=1023){$('#main-header, #user-sidebar').removeClass('is-active');}
$('.js-mobile-menu').on('click',function(){$(this).toggleClass('is-active');})
$('.format__custom').on('click',function(e){let $target=$(e.target);if(!($target.closest('.form').length||$target.hasClass('form'))){$('.js-close-format').trigger('click');}});$('.js-close-format').on('click',function(){$('.format__custom').fadeOut();});$('.js-format-custom').on('click',function(){let width=$('#canvas_width').val(),height=$('#canvas_height').val();updateCustomImage(width,height);$('.format__custom').fadeIn();});let oldWidth=$('.format__custom #canvas_width, #custom-modal #canvas_width').val(),oldHeight=$('.format__custom #canvas_height, #custom-modal #canvas_height').val(),oldDuration=$('.format__custom #duration, #custom-modal #duration').val();$('.format__custom .form-input, #custom-modal .form-input').on('blur',function(){let $this=$(this),value=$this.val(),max=$this.data('max'),min=$this.data('min'),$custom=$('.custom__image .image');if(max){if(value>max){$this.val(max);}}
if(min){if(value<min){$this.val(min);}}
if($this.attr('id')=='canvas_width'){if(value==''){$this.val(oldWidth)}else{oldWidth=value;}}
if($this.attr('id')=='canvas_height'){if(value==''){$this.val(oldHeight)}else{oldHeight=value;}}
updateCustomImage(oldWidth,oldHeight);if($('.js-preset-sizes').length){let selected=`${$('#canvas_width').val()}x${$('#canvas_height').val()}`,$selectedOption=$('.js-preset-sizes').find(`[value="${selected}"]`);if($selectedOption.length==0){selected='custom';}
$('.js-preset-sizes').val(selected);}
if($this.attr('id')=='duration'){if(value==''){$this.val(oldDuration)}else{oldDuration=value;}}}).on('keypress',function(e){if(e.keyCode==13){e.preventDefault();$(this).trigger('blur');}});$('.js-preset-sizes').on('change',function(){let $this=$(this);if($this.val()!='custom'){let value=$this.val(),sizes=value.split('x'),width=sizes[0],height=sizes[1],duration=$this.find(`[value="${value}"]`).data('duration')||8;$('#canvas_width').val(width);$('#canvas_height').val(height);$('#duration').val(parseInt(duration));updateCustomImage(width,height);}});function updateCustomImage(width,height){let ratio=width/height,tempHeight=200,tempWidth=ratio*tempHeight;if(tempWidth>355){tempWidth=355;tempHeight=tempWidth/ratio;}
$('.custom__image').css({width:tempWidth,height:tempHeight});}
$('.js-open-plan').on('click',function(e){e.preventDefault();$('#change-membership-modal').addClass('is-show');});$('.js-change-plan').on('click',function(){let $this=$(this);$this.addClass('is-selected').removeClass('no-bg').siblings().addClass('no-bg').removeClass('is-selected');if(!$this.hasClass('is-active')){$('.js-swop-plan').data('selected',$this.data('plan'));}else{$('.js-swop-plan').data('selected','');}});$('.js-swop-plan').on('click',function(e){e.preventDefault();if($(this).data('selected')!=""){$('.js-open-plan, .js-swop-plan').hide();$('.js-swop-plan').after('<div class="preloader-icon tmp" style="display: block; margin: 0 auto; width: 25px; height: 25px;"></div>');$('.js-open-plan').parent().after('<div class="preloader-icon tmp" style="display: block; margin: 0 auto; width: 25px; height: 25px;"></div>');$('#s-plan').val($(this).data('selected'));$('#s_subscription_form').submit();}});$('.js-toggle-info').on('click',function(){$('.info-sub-menu').slideToggle(300);});$('.js-show-tutorials').on('click',function(){$('#tutorials-modal').addClass('is-show');});$('.js-show-quick-tip').on('click',function(){initProductTour();});if($('.profiles').length){$(document).ready(function(){$.ajax({url:homeUrl()+'/api/check-user-profile',type:'GET',}).done(function(res){if(res.needs_profiling){let step=res.step;showProfileStep(step,res.profile_parent,res.parent_ids);if(res.profile_parent){$('.next-profile').data('close','true');}
$('.profiles').removeClass('is-loading');}else{$('.profiles').remove();}});});function showProfileStep(step=1,profile_parent=false,parent_ids=[]){if(step==1){$('.prev-profile').addClass('is-hidden');}else if(step==2){$('.prev-profile').removeClass('is-hidden');}
if(profile_parent&&JSON.parse(parent_ids).length>0){let parents=JSON.parse(parent_ids);$('.profiles__option').each(function(){if(parents.indexOf(String($(this).data('id')))==-1){$(this).remove();}});}
let $nextStep=$('.profiles__item[data-step="'+step+'"]');if($nextStep.length){$('.profiles__item').removeClass('is-show');$nextStep.addClass('is-show');}
$('.js-prev-profile, .js-next-profile').removeClass('is-loading');}
$('button.profiles__option').on('click',function(){$('button.profiles__option').removeClass('is-selected');$(this).addClass('is-selected');$('.next-profile').attr('disabled',false);});$('.js-prev-profile').on('click',function(){$(this).addClass('is-loading');showProfileStep($('.profiles__item.is-show').data('step')-1);});var $profileSelect=$('.js-profiles-dropdown').selectize({valueField:'id',labelField:'text',create:false}),profileSelect=$profileSelect[0].selectize;$('.js-next-profile').on('click',function(){let canClose=true,step=parseInt($('.profiles__item.is-show').data('step')),$selectedOption=$('.profiles__option.is-selected'),selectionHasChild=$('.profiles__option.is-selected').hasClass('has-child'),selectedOption;$(this).addClass('is-loading');if(step==1){selectedOption=parseInt($selectedOption.data('id'));if(selectionHasChild&&$('.next-profile').data('close')!=='true'){canClose=false;}}else if(step==2){selectedOption=parseInt(profileSelect.getValue());}
let data={_token:csrfToken(),profile_id:selectedOption};if($('.next-profile').data('close')==='true'){data.profile_parent=true;}
$.ajax({url:homeUrl()+'/api/set-user-profile',type:'POST',data:data,}).done(function(res){if(res.status=='success'&&canClose){$('.profiles').remove();if($('body').hasClass('body__project')){initProductTour(true);}}else if(res.status=='success'&&selectionHasChild){$.ajax({url:homeUrl()+'/api/get-profile-children/'+selectedOption,type:'GET',}).done(function(res){profileSelect.clearOptions();profileSelect.addOption(res.data);profileSelect.setValue(res.data[0].id,true);profileSelect.refreshOptions(false);showProfileStep(step+1);});}});});}});let playerArr=[];if($('.tutorial').length){let $tutorial=$('.tutorial');let tag=document.createElement('script');tag.src="https://www.youtube.com/iframe_api";$('#main-content').after(tag);$('.tutorial__item').each(function(index){playerArr[index]=$(this).find('video')[0];});$('.js-close-user-modal',$tutorial).on('click',function(){setCookie('tutorial',true,1000);});$('.js-show-tutorial',$tutorial).on('click',function(){let $this=$(this),$currentStep=$this.closest('.tutorial__step');$currentStep.hide();$currentStep.next().show(400,function(){if($('.tutorial__carousel').length){$('.tutorial__carousel').slick({slidesToShow:1,slidesToScroll:1,dots:true,infinite:false,appendArrows:$('.tutorial__arrow'),prevArrow:'<button type="button" class="slick-arrow slick-prev">Previous</button>',nextArrow:'<button type="button" class="slick-arrow slick-next">Next</button>',speed:500,fade:true}).on('beforeChange',function(event,slick,currentSlide,nextSlide){let slide=slick.$slides,$nextSlide=$(slide[nextSlide]);}).on('afterChange',function(event,slick,currentSlide){let slide=slick.$slides;if(currentSlide==slide.length-1){$('.tutorial__arrow .slick-next').removeClass('slick-disabled').attr('aria-disabled',false);$('.tutorial__arrow .slick-next').on('click.next',function(){$(this).closest('.tutorial__step').hide();$(this).closest('.tutorial__step').next().show();});}else{$('.tutorial__arrow .slick-next').off('click.next');}});}});});}
$('.banner--pricing').on('change','.pricing-frequency .plan-slider-menu',function(){getPlanInfo($(this));});function getPlanInfo($this){$('.payment-plan').children().hide();showPreloader($('.payment-plan'),'Getting new amount...',25,25,true,true);if($this.is(':checked')){$this.data('frequency','annually');}else{$this.data('frequency','monthly');}
let plan='premium',frequency=$this.data('frequency');$('input[name="plan"]').val('offeo-'+plan+'-'+frequency);var promoCode=$('#promoCode').val();var promoData={selectedPlan:'offeo-premium'+'-'+$this.data('frequency'),_token:csrfToken()};if(typeof promoCode!=='undefined'&&promoCode!==''){promoData.promoCode=promoCode;}
$.ajax({url:homeUrl()+'/braintree/get-plan-amount',type:'POST',data:promoData,}).done(function(e){updatePlanInfo(e.billed_today,e.billed_as,e.old_amount,e.new_amount,e.has_promo,plan,frequency);removePreloader($('.payment-plan').parent());$('.payment-plan').children().show();});}
function updatePlanInfo(billed_today,billed_as,old_amount,new_amount,has_promo,plan,frequency){var $context=$('.payment-plan');billed_today=showDecimalIfNeeded(billed_today);billed_as=showDecimalIfNeeded(billed_as);old_amount=showDecimalIfNeeded(old_amount);new_amount=showDecimalIfNeeded(new_amount);let route='offeo-'+plan+'-'+frequency,billed_text='Billed $',total_amount='';if(billed_today!=billed_as){total_amount+=billed_today+' today then $';}
total_amount+=billed_as+' '+frequency;billed_text+=total_amount;$('.frequency','.payment-frequency').text(billed_text);$('.price .old .amt',$context).text('$'+old_amount);$('.price .new .amt',$context).text('$'+new_amount);$('.total-amt').text('$'+total_amount);$('.alternate .billed-as',$context).text(billed_as);if(has_promo){$('.price .old',$context).addClass('strike');$('.price .new',$context).show();}else{$('.price .old',$context).removeClass('strike');$('.price .new',$context).hide();}
if(frequency=='annually'){$('.alternate',$context).show();}else{$('.alternate',$context).hide();}
$('#subscribe-'+plan+'-plan').attr('href',"/plans/"+route);}
if($('#promo-bar').length){let $promoBar=$('#promo-bar');$('.btn-close-user-modal',$promoBar).on('click',function(){$promoBar.fadeOut(1500).delay().remove();});}
function showOldModal(referer){switch(referer){case "register":showRegisterModal();break;case "login":showLoginModal();break;case "forgot-pw":showForgotPwModal();break;case "reset-pw":showResetPwModal();break;}}
function clearUnwantedModalErrors(referer,modal='.user-modal'){$(modal+' form:not("#form-'+referer+'")').each(function(){$(this).find("div.form-group").removeClass("has-error");$(this).find("span.help-block").text("");});}
function cleanThenShowModal(referer){$('.user-modal form div.form-group input').each(function(){if($(this).prop('value')){$(this).siblings('label').addClass("is-filled");}});showOldModal(referer);}
function showModal(modal){$('form[id^="form-"]').hide();$('#form-'+modal).show();}
function showLoginModal(){$('#auth-modal-wrapper').attr('class','user-modal');$('#auth-modal-wrapper').addClass('is-show login');if($('#auth-modal-wrapper').data('login-type')=="link"){if(!$('.form-login-email .help-block').hasClass('error')){$('#emailLogin').val("");}
let $loginWithPassword=$('.form-login-password, .form-login-remember, .js-login-link, .js-submit-login'),$loginWithLink=$('.js-login-password, .js-send-link, .login-link-instruction');$loginWithPassword.hide();$loginWithLink.show();$('#loginLink').val("on");$('#btnSendlink','#btnSubmit').toggle();$('#passwordLogin').prop('required',!jQuery('#passwordLogin').prop('required'));}
$('.btn-close-user-modal').show();$('.btn-back-to-login-user-modal').hide();showModal('login');}
function showRegisterModal(){$('#auth-modal-wrapper').attr('class','user-modal');$('#auth-modal-wrapper').addClass('is-show register');showModal('register');}
function showForgotPwModal(){$('#auth-modal-wrapper').attr('class','user-modal');$('#auth-modal-wrapper').addClass('is-show forgot-pw');$('.btn-close-user-modal').hide();$('.btn-back-to-login-user-modal').show();showModal('forgot-pw');}
function showResetPwModal(){$('#auth-modal-wrapper').attr('class','user-modal');$('#auth-modal-wrapper').addClass('is-show reset-pw');showModal('reset-pw');}
function showControl(btn){console.log('show')
var $objController=$('#main-object-controllers'),$objControllerGroup=$('.object-controller-group',$objController),type=$(btn).data('activates');if(!$('#'+type).is(':visible')){$objController.show();$objController.find(`.object-controller-group[data-type="${type}"]`).show()}
else{$objController.hide();}}
function update_range_slider(range_slider=null,val=0){if(range_slider!=null){$(range_slider).slider('option','value',val);}}
function hide_control(){$('.control-item').removeClass('opened');$('.layer-item').removeClass('active');}
function create_project(){var canvas_width=$('#canvas-width').val()||'',canvas_height=$('#canvas-height').val()||'',project_url=homeUrl()+'/project';if(canvas_width==''&&canvas_height==''){window.location.href=project_url;}
else{window.location.href=project_url+'/custom/'+canvas_width+'x'+canvas_height;}}
function deleteItem(btn){var id=$(btn).data('id'),url=$(btn).data('url');$.confirm({title:'Delete record?',buttons:{confirm:function(){$.ajax({url:url,type:'POST',dataType:'json',data:{_token:csrfToken(),_method:'DELETE',},}).done(function(e){if(e.status=='success'){$(btn).closest('tr').fadeOut(3000).delay().remove();$.alert(e.msg);if(typeof e.rdr!='undefined'){window.location.href=e.rdr;}}}).fail(function(){console.log("error");})},cancel:function(){},}})}
function initSidebarHeight(){}
function removeBrowserTab(reload=false){$.ajax({url:homeUrl()+'/api/remove-browser-tab/'+$('#project_id').val(),type:'GET',dataType:'json',async:false}).done(function(res){if(reload){location.reload(true);}});}
function formatOption(option){var $option=$('<div><strong>'+option.text+'</strong></div><div>'+option.title+'</div>');return $option;}
function makeSelect2($ele,opts={}){if(isEmptyObject(opts)){opts={minimumResultsForSearch:-1,width:'.select2-container',dropdownAutoWidth:true,templateResult:function(data,container){if(data.element&&data.element.value=="create"){$(container).addClass('opt-create');}
return data.text;}};}
$ele.select2(opts);$ele.val('').trigger("change");}
function destroySelect2($ele){if($ele.hasClass("select2-hidden-accessible")){$ele.select2('destroy');$('option',$ele).slice(1).remove();}}
function remakeSelect2($ele,opts={}){destroySelect2($ele);makeSelect2($ele,opts);}
function destroyHideSelect2($ele){destroySelect2($ele);$ele.hide();}
function addSelect2CreateOption($ele,newText){if(!$('option[value="create"]',$ele).length){var opt=new Option("Create New "+newText,'create');$ele.prepend(opt);}}
function promptDesktopOnly(){$.confirm({theme:'offeo-custom',draggable:false,title:'Hey There!',content:'<p style="text-align: center; max-width: 400px; margin: 0 auto;">OFFEO is currently available on desktop only. For full features, please continue on desktop.</p>',buttons:{ok:function(){},}});}
function fbAsyncInit(){window.fbAsyncInit=function(){FB.init({appId:cnfg.FB_APP_ID,autoLogAppEvents:true,xfbml:true,version:'v3.2'});};}
function triggerFBSendDialog(link,redirect_uri=null){fbAsyncInit();let data={};data.app_id=cnfg.FB_APP_ID;data.method='send';data.link=link;if(redirect_uri!==null){data.redirect_uri=redirect_uri;}
FB.ui(data);}
function updateCategoryFilters($ele){if(typeof $ele!='undefined'){let activeClass='is-selected';let eleId='link';if($('body').hasClass('body__project')){activeClass='is-active';eleId='category-id';}
if(typeof $ele.data('parent')==='undefined'&&$ele.data(eleId)!==$('.category-filter.'+activeClass).data(eleId)){$('.category-filter[data-parent]').slideUp();$('.category-filter[data-parent="'+$ele.data(eleId)+'"]').slideDown();}
if(!$ele.hasClass('has-parent')){let selectedSubCategory=$('.category-filter[data-parent="'+$ele.data(eleId)+'"].'+activeClass).length,totalSubCategory=$('.category-filter[data-parent="'+$ele.data(eleId)+'"]').length;$('.category-filter').removeClass(activeClass);$('input[type="checkbox"]','.category-filter').attr('checked',false);if(selectedSubCategory!==totalSubCategory){$('.category-filter[data-parent="'+$ele.data(eleId)+'"]').addClass(activeClass);$('.category-filter[data-parent="'+$ele.data(eleId)+'"] input[type="checkbox"]').attr('checked',true);}else{$('.category-filter[data-parent="'+$ele.data(eleId)+'"]').removeClass(activeClass);$('.category-filter[data-parent="'+$ele.data(eleId)+'"] input[type="checkbox"]').attr('checked',false);}
$ele.addClass(activeClass);$('input[type="checkbox"]',$ele).attr('checked',true);}else{$ele.toggleClass(activeClass);let toCheck=false;if($ele.hasClass(activeClass)){toCheck=true;}
$('input[type="checkbox"]',$ele).attr('checked',toCheck);}}}
function updateFormatFilters($ele){if(typeof $ele!='undefined'){let activeClass='is-selected',eleSelector='.js-format',selectedSelector='.template__format-selected';if($('body').hasClass('body__project')){activeClass='is-active';eleSelector='.js-element-search';selectedSelector='.design__format-selected';}
$(eleSelector,'.js-format-holder').removeClass(activeClass);$ele.addClass(activeClass);$(selectedSelector).text($ele.text());}}